{% extends 'base.html.twig' %} 

{% block title 'Mon panier | ' ~ parent() %} 

{% block body %}

<h1>{{title}}</h1>
<p>Voici l'ensemble de vos produits qui se trouve dans votre panier</p>
{% if cart|length > 0 %}
<table class="table mt-3">
    <thead>
        <tr>
            <th scope="col">Produit</th>
            <th scope="col"></th>
            <th scope="col">Quantité</th>
            <th scope="col">Prix</th>
            <th scope="col">Total</th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        {% set total = null %} 
        
        {% for product in cart %}
        <tr>
            <th>
                <img src="/uploads/{{ product.product.illustration }}" alt="{{ product.product.name }}"
                    height="80px"></br>
            </th>
            <td>
                {{ product.product.name}}</br>
                <small>{{ product.product.subtitle }}</small>
            </td>
            <td>
                <a href="{{ path('decrease_to_cart', {'id' : product.product.id }) }}">
                    <img src="{{ asset('images/pagepanier/minus.png')}}" height="10px">
                </a>
                x {{ product.quantity }}
                <a href="{{ path('add_to_cart', {'id' : product.product.id }) }}">
                    <img src="{{ asset('images/pagepanier/plus.png')}}" height="10px">
                </a>
            </td>
            <td>{{ (product.product.price / 100 )|number_format(2, ',', '.') }} €</td>
            <td>{{ ((product.product.price * product.quantity ) / 100 )|number_format(2, ',', '.') }} €</td>
            <td>
                <a href="{{ path('delete_to_cart', { 'id' : product.product.id}) }}">
                    <img src="{{ asset('images/pagepanier/trash.png')}}" height="20px">
                </a>
            </td>
        </tr>
        {% set total = total + (product.product.price * product.quantity) %} 
        
        {% endfor %}
    </tbody>
</table>
<div class=" text-right mb-5 ">
    <b>Nombre de produit :</b> {{ cart|length }}</br>
    <b>Totale de mon panier :</b> {{ (total / 100)|number_format(2, ',', '.') }} €
    <a href="{{ path('order') }} " class="btn btn-outline-success btn-block mt-3">Valider Mon Panier</a>
</div>
{% else %}
<hr>
<p><b>Votre Panier est Vide</b></p>
{% endif %}

<style>
    h1 {
        margin-top: 300px;
    }
    a {
        color: #fff;
    }
</style>
{% endblock %}